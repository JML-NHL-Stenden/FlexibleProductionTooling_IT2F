<!-- product_module/views/product_views.xml -->
<odoo>
    <!-- Product Type Views -->
    <record id="view_product_type_list" model="ir.ui.view">
        <field name="name">product.module.type.list</field>
        <field name="model">product_module.type</field>
        <field name="arch" type="xml">
            <list string="Product Types">
                <field name="name"/>
                <field name="product_count" string="Total Variants"/>
            </list>
        </field>
    </record>

    <record id="view_product_type_form" model="ir.ui.view">
        <field name="name">product.module.type.form</field>
        <field name="model">product_module.type</field>
        <field name="arch" type="xml">
            <form string="Product Category">
                <sheet>
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; padding: 24px; margin-bottom: 24px; color: white;">
                        <div style="display: flex; align-items: center; gap: 20px;">
                            <div style="width: 80px; height: 80px; border-radius: 16px; overflow: hidden; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; border: 3px solid rgba(255,255,255,0.3);">
                                <field name="image" widget="image" options="{'size': [80, 80]}" style="width: 100%; height: 100%; object-fit: cover;"/>
                                <i class="fa fa-image" style="font-size: 32px; color: rgba(255,255,255,0.7);" invisible="image != False"/>
                            </div>
                            <div style="flex: 1;">
                                <h1 style="color: white; margin: 0 0 8px 0; font-size: 24px; font-weight: 700;">
                                    <field name="name" placeholder="Category Name" required="1" style="color: white; background: transparent; border: none; font-size: 24px;"/>
                                </h1>
                                <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin-top: 12px;">
                                    <span style="background: rgba(255,255,255,0.2); border-radius: 20px; padding: 6px 12px; font-size: 12px; font-weight: 600;">
                                        <i class="fa fa-cube"/> <field name="product_count"/> Variants
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 24px;">
                        <h3 style="color: #2c3e50; margin-bottom: 16px; font-weight: 600;">
                            <i class="fa fa-info-circle" style="color: #007bff; margin-right: 8px;"/> Category Information
                        </h3>
                        <div>
                            <label for="description" style="font-weight: 600; color: #495057; margin-bottom: 8px; display: block;">Description</label>
                            <field name="description" placeholder="Describe this product category..." style="width: 100%; min-height: 80px;"/>
                        </div>
                    </div>

                    <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <h3 style="color: #2c3e50; margin-bottom: 16px; font-weight: 600;">
                            <i class="fa fa-list" style="color: #28a745; margin-right: 8px;"/> Products in this Category
                        </h3>
                        <div class="alert alert-info" role="alert" style="margin-bottom: 16px;">
                            <i class="fa fa-lightbulb-o"/> 
                            <strong>Tip:</strong> Products assigned to this category will appear here. You can assign products to this category when creating or editing them in the Product List tab.
                        </div>
                        <field name="product_ids" readonly="1">
                            <kanban>
                                <field name="name"/>
                                <field name="product_code"/>
                                <field name="variant"/>
                                <field name="image"/>
                                <templates>
                                    <t t-name="kanban-box">
                                        <div class="oe_kanban_card" style="border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 4px; border-left: 3px solid #28a745;">
                                            <div class="oe_kanban_content" style="padding: 12px;">
                                                <div style="display: flex; align-items: center; gap: 12px;">
                                                    <div style="width: 40px; height: 40px; border-radius: 6px; overflow: hidden; background: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                                                        <field name="image" widget="image" options="{'size': [40, 40]}" style="width: 100%; height: 100%; object-fit: cover;"/>
                                                        <i class="fa fa-image text-muted" style="font-size: 16px;" invisible="image != False"/>
                                                    </div>
                                                    <div style="flex: 1;">
                                                        <strong style="font-size: 14px; color: #2c3e50; display: block;">
                                                            <field name="name"/>
                                                        </strong>
                                                        <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap; margin-top: 4px;">
                                                            <span style="background: #6c757d; color: white; border-radius: 8px; padding: 2px 6px; font-size: 10px;">
                                                                <i class="fa fa-barcode"/> <field name="product_code"/>
                                                            </span>
                                                            <span style="background: #17a2b8; color: white; border-radius: 8px; padding: 2px 6px; font-size: 10px;" invisible="not variant">
                                                                <i class="fa fa-tag"/> <field name="variant"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                </templates>
                            </kanban>
                            <list>
                                <field name="name"/>
                                <field name="product_code"/>
                                <field name="variant"/>
                                <field name="image" widget="image" options="{'size': [64, 64]}"/>
                            </list>
                        </field>
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Product Views -->
    <record id="view_product_list" model="ir.ui.view">
        <field name="name">product.module.product.list</field>
        <field name="model">product_module.product</field>
        <field name="arch" type="xml">
            <list string="Products">
                <field name="sequence" widget="handle"/>
                <field name="name"/>
                <field name="product_code"/>
                <field name="variant"/>
                <field name="product_type_id"/>
                <field name="image" widget="image" options="{'size': [64, 64]}"/>
                <field name="instruction_count" string="Instructions"/>
            </list>
        </field>
    </record>

    <record id="view_product_form" model="ir.ui.view">
        <field name="name">product.module.product.form</field>
        <field name="model">product_module.product</field>
        <field name="arch" type="xml">
            <form string="Product Details">
                <sheet>
                    <div style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); border-radius: 16px; padding: 24px; margin-bottom: 24px; color: white;">
                        <div style="display: flex; align-items: center; gap: 20px;">
                            <div style="width: 100px; height: 100px; border-radius: 16px; overflow: hidden; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; border: 3px solid rgba(255,255,255,0.3);">
                                <field name="image" widget="image" options="{'size': [100, 100]}" style="width: 100%; height: 100%; object-fit: cover;"/>
                                            <i class="fa fa-image" style="font-size: 40px; color: rgba(255,255,255,0.7);" invisible="image != False"/>
                            </div>
                            <div style="flex: 1;">
                                <h1 style="color: white; margin: 0 0 8px 0; font-size: 24px; font-weight: 700;">
                                    <field name="name" placeholder="Enter Product Name" required="1" style="color: white; background: transparent; border: none; font-size: 24px;"/>
                                </h1>
                                <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
                                    <span style="background: rgba(255,255,255,0.2); border-radius: 20px; padding: 6px 12px; font-size: 12px; font-weight: 600;">
                                        <i class="fa fa-barcode"/> <field name="product_code" required="1" style="color: white; background: transparent; border: none; width: 120px;"/>
                                    </span>
                                    <span style="background: rgba(255,255,255,0.2); border-radius: 20px; padding: 6px 12px; font-size: 12px; font-weight: 600;" invisible="not variant">
                                        <i class="fa fa-tag"/> <field name="variant" style="color: white; background: transparent; border: none; width: 100px;"/>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                            <h3 style="color: #2c3e50; margin-bottom: 16px; font-weight: 600;">
                                <i class="fa fa-info-circle" style="color: #007bff; margin-right: 8px;"/> Product Information
                            </h3>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                <div>
                                    <label for="product_type_id" style="font-weight: 600; color: #495057; margin-bottom: 8px; display: block;">Product Type</label>
                                    <field name="product_type_id" style="width: 100%;"/>
                                </div>
                                <div>
                                    <label for="variant" style="font-weight: 600; color: #495057; margin-bottom: 8px; display: block;">Variant</label>
                                    <field name="variant" style="width: 100%;" placeholder="e.g., Size, Color, Model"/>
                                </div>
                            </div>
                            <div>
                                <label for="description" style="font-weight: 600; color: #495057; margin-bottom: 8px; display: block;">Description</label>
                                <field name="description" placeholder="Enter detailed product description..." style="width: 100%; min-height: 100px;"/>
                            </div>
                        </div>
                        
                        <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                            <h3 style="color: #2c3e50; margin-bottom: 16px; font-weight: 600;">
                                <i class="fa fa-qrcode" style="color: #6f42c1; margin-right: 8px;"/> QR Code
                            </h3>
                            <div style="text-align: center;">
                                <div style="background: #f8f9fa; border-radius: 12px; padding: 20px; margin-bottom: 16px; border: 2px dashed #dee2e6;">
                                    <field name="qr_image" widget="image" filename="qr_image_name" options="{'size': [150, 150]}" style="max-width: 150px; max-height: 150px;"/>
                                    <div style="margin-top: 12px; font-size: 12px; color: #6c757d;">
                                        <field name="qr_text" readonly="1" style="background: transparent; border: none; text-align: center; font-weight: 600;"/>
                                    </div>
                                </div>
                                <div style="font-size: 12px; color: #6c757d; text-align: center;">
                                    QR code automatically generated from Product Code
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <h3 style="color: #2c3e50; margin-bottom: 16px; font-weight: 600;">
                            <i class="fa fa-list-ol" style="color: #fd7e14; margin-right: 8px;"/> Assembly Instructions
                        </h3>
                        <div class="alert alert-info" role="alert" style="margin-bottom: 16px;">
                            <i class="fa fa-lightbulb-o"/> 
                            <strong>Tip:</strong> Add step-by-step instructions to help users assemble this product. You can include images and detailed descriptions for each step.
                        </div>
                        <field name="instruction_ids" context="{'default_product_id': id}">
                            <list editable="bottom">
                                <field name="sequence" widget="handle"/>
                                <field name="title"/>
                                <field name="description"/>
                            </list>
                            <form>
                                <sheet>
                                    <div style="background: linear-gradient(135deg, #fd7e14 0%, #e83e8c 100%); border-radius: 12px; padding: 16px; margin-bottom: 16px; color: white;">
                                        <h4 style="color: white; margin: 0; font-weight: 600;">
                                            <i class="fa fa-list-ol" style="margin-right: 8px;"/> Assembly Step
                                        </h4>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="sequence"/>
                                            <field name="title"/>
                                        </group>
                                        <group>
                                            <field name="image" widget="image" class="oe_avatar"/>
                                        </group>
                                    </group>
                                    <group>
                                        <field name="description" placeholder="Enter detailed assembly instructions here..."/>
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Main Page View with Three Tabs -->
    <record id="view_product_assemble_form" model="ir.ui.view">
        <field name="name">product.assemble.page.form</field>
        <field name="model">product_module.page</field>
        <field name="arch" type="xml">
            <form string="Products">
                <sheet>
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; padding: 24px; margin-bottom: 24px; color: white;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 700;">
                                    <i class="fa fa-cube" style="margin-right: 12px;"/> <field name="name" readonly="1" style="color: white; background: transparent; border: none; font-size: 32px;"/>
                                </h1>
                                <p style="color: rgba(255,255,255,0.9); margin: 8px 0 0 0; font-size: 16px;">
                                    Organize your products into categories and manage your complete product catalog
                                </p>
                            </div>
                            <div style="display: flex; gap: 12px;">
                                <div style="background: rgba(255,255,255,0.2); border-radius: 12px; padding: 12px 20px; text-align: center;">
                                    <div style="font-size: 24px; font-weight: 700; color: white;">
                                        <field name="product_type_ids" widget="statinfo" string="Types"/>
                                    </div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.8);">Product Types</div>
                                </div>
                                <div style="background: rgba(255,255,255,0.2); border-radius: 12px; padding: 12px 20px; text-align: center;">
                                    <div style="font-size: 24px; font-weight: 700; color: white;">
                                        <field name="product_ids" widget="statinfo" string="Products"/>
                                    </div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.8);">Total Products</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <notebook>
                        <!-- TAB 1: Product Categories -->
                        <page string="Product Categories" name="product_categories">
                            <div class="alert alert-info" role="alert">
                                <i class="fa fa-info-circle"/> 
                                <strong>Product Categories</strong> - Create categories to organize your products. Each category can contain multiple product variants.
                            </div>
                            
                            <div style="margin-bottom: 16px;">
                                <button name="action_create_product_type" type="object" class="btn btn-primary" style="background: linear-gradient(45deg, #28a745 0%, #20c997 100%); border: none; border-radius: 8px; padding: 12px 24px; font-weight: 600;">
                                    <i class="fa fa-plus" style="margin-right: 8px;"/> Create New Category
                                </button>
                            </div>
                            
                            <field name="product_type_ids" context="{'default_page_id': id}">
                                <kanban>
                                    <field name="name"/>
                                    <field name="product_count"/>
                                    <field name="image"/>
                                    <field name="description"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div class="oe_kanban_card oe_kanban_global_click" style="border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin: 8px; border-left: 4px solid #667eea;">
                                                <div class="oe_kanban_content" style="padding: 16px;">
                                                    <div class="o_kanban_record_top" style="margin-bottom: 12px;">
                                                        <div class="o_kanban_record_headings">
                                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                                <div style="width: 48px; height: 48px; border-radius: 8px; overflow: hidden; background: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                                                                    <field name="image" widget="image" options="{'size': [48, 48]}" style="width: 100%; height: 100%; object-fit: cover;"/>
                                                                    <i class="fa fa-image text-muted" style="font-size: 20px;" invisible="image != False"/>
                                                                </div>
                                                                <div>
                                                                    <strong class="o_kanban_record_title" style="font-size: 16px; color: #2c3e50;">
                                                                        <field name="name"/>
                                                                    </strong>
                                                                    <div class="text-muted" style="font-size: 12px; margin-top: 2px;">
                                                                        <field name="description" placeholder="No description"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="o_kanban_record_body">
                                                        <div class="o_kanban_record_bottom">
                                                            <div class="oe_kanban_bottom_left">
                                                                <span class="badge badge-primary" style="background: linear-gradient(45deg, #667eea 0%, #764ba2 100%); border-radius: 20px; padding: 6px 12px; font-size: 12px;">
                                                                    <i class="fa fa-cube"/> <field name="product_count"/> Variants
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                                <list editable="bottom" string="Product Categories">
                                    <field name="name" required="1"/>
                                    <field name="product_count" string="Variants" readonly="1"/>
                                    <field name="description"/>
                                </list>
                            </field>
                        </page>
                        
                        <!-- TAB 2: Product List -->
                        <page string="Product List" name="product_list">
                            <div class="alert alert-success" role="alert">
                                <i class="fa fa-list"/> 
                                <strong>Product Catalog</strong> - Manage all your products. Assign them to categories to organize variants like Samsung, iPhone under "Mobile Phones".
                            </div>
                            
                            <div style="margin-bottom: 16px;">
                                <button name="action_create_product" type="object" class="btn btn-success" style="background: linear-gradient(45deg, #28a745 0%, #20c997 100%); border: none; border-radius: 8px; padding: 12px 24px; font-weight: 600;">
                                    <i class="fa fa-plus" style="margin-right: 8px;"/> Add New Product
                                </button>
                            </div>
                            
                            <field name="product_ids" context="{'default_page_id': id}">
                                <kanban>
                                    <field name="name"/>
                                    <field name="product_code"/>
                                    <field name="variant"/>
                                    <field name="product_type_id"/>
                                    <field name="image"/>
                                    <field name="instruction_count"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div class="oe_kanban_card oe_kanban_global_click" style="border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin: 8px; border-left: 4px solid #28a745;">
                                                <div class="oe_kanban_content" style="padding: 16px;">
                                                    <div class="o_kanban_record_top" style="margin-bottom: 12px;">
                                                        <div class="o_kanban_record_headings">
                                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                                <div style="width: 64px; height: 64px; border-radius: 8px; overflow: hidden; background: #f8f9fa; display: flex; align-items: center; justify-content: center; border: 2px solid #e9ecef;">
                                                                    <field name="image" widget="image" options="{'size': [64, 64]}" style="width: 100%; height: 100%; object-fit: cover;"/>
                                                                    <i class="fa fa-image text-muted" style="font-size: 24px;" invisible="image != False"/>
                                                                </div>
                                                                <div style="flex: 1;">
                                                                    <strong class="o_kanban_record_title" style="font-size: 16px; color: #2c3e50; display: block; margin-bottom: 4px;">
                                                                        <field name="name"/>
                                                                    </strong>
                                                                    <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
                                                                        <span class="badge badge-secondary" style="background: #6c757d; border-radius: 12px; padding: 4px 8px; font-size: 11px;">
                                                                            <i class="fa fa-barcode"/> <field name="product_code"/>
                                                                        </span>
                                                                        <span class="badge badge-info" style="background: #17a2b8; border-radius: 12px; padding: 4px 8px; font-size: 11px;" invisible="not variant">
                                                                            <i class="fa fa-tag"/> <field name="variant"/>
                                                                        </span>
                                                                        <span class="badge badge-warning" style="background: #ffc107; color: #212529; border-radius: 12px; padding: 4px 8px; font-size: 11px;" invisible="not product_type_id">
                                                                            <i class="fa fa-folder"/> <field name="product_type_id"/>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="o_kanban_record_body">
                                                        <div class="o_kanban_record_bottom">
                                                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                                                <div>
                                                                    <span class="badge badge-success" style="background: linear-gradient(45deg, #28a745 0%, #20c997 100%); border-radius: 20px; padding: 6px 12px; font-size: 12px;" invisible="instruction_count == 0">
                                                                        <i class="fa fa-list-ol"/> <field name="instruction_count"/> Instructions
                                                                    </span>
                                                                    <span class="badge badge-light" style="border-radius: 20px; padding: 6px 12px; font-size: 12px; color: #6c757d;" invisible="instruction_count > 0">
                                                                        <i class="fa fa-exclamation-circle"/> No Instructions
                                                                    </span>
                                                                </div>
                                                                <button name="action_edit_product" type="object" class="btn btn-primary btn-sm" style="border-radius: 20px; padding: 6px 16px; font-size: 12px; background: linear-gradient(45deg, #007bff 0%, #0056b3 100%); border: none;">
                                                                    <i class="fa fa-edit"/> Edit
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                                <list string="Products" decoration-info="instruction_count > 0">
                                    <field name="sequence" widget="handle"/>
                                    <field name="name"/>
                                    <field name="product_code"/>
                                    <field name="variant"/>
                                    <field name="product_type_id"/>
                                    <field name="image" widget="image" options="{'size': [80, 80]}"/>
                                    <field name="instruction_count" string="# Instructions"/>
                                    <button name="action_edit_product" type="object" string="Edit" class="btn-primary"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Actions -->
    <record id="action_product_type" model="ir.actions.act_window">
        <field name="name">Product Types</field>
        <field name="res_model">product_module.type</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_product_type_list"/>
    </record>

    <record id="action_product" model="ir.actions.act_window">
        <field name="name">Products</field>
        <field name="res_model">product_module.product</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_product_list"/>
    </record>

    <record id="action_product_assemble_page" model="ir.actions.act_window">
        <field name="name">Products</field>
        <field name="res_model">product_module.page</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_product_assemble_form"/>
        <field name="res_id" ref="product_module.product_assemble_page_record"/>
        <field name="target">current</field>
        <field name="context">{'create': False, 'edit': True}</field>
    </record>

    <!-- TOP-LEVEL APP MENU -->
    <record id="menu_product_module_root" model="ir.ui.menu">
        <field name="name">Product Module</field>
        <field name="sequence">10</field>
        <field name="action" eval="False"/>
        <field name="parent_id" eval="False"/>
    </record>

    <!-- Menu items -->
    <menuitem id="menu_products"
              name="Products"
              parent="menu_product_module_root"
              action="action_product_assemble_page"
              sequence="10"/>

    <menuitem id="menu_product_types"
              name="Product Types"
              parent="menu_product_module_root"
              action="action_product_type"
              sequence="20"/>

    <menuitem id="menu_all_products"
              name="All Products"
              parent="menu_product_module_root"
              action="action_product"
              sequence="30"/>
</odoo>
